# Version Release Fix - October 2025

## Issue Summary
The release version was stuck on **1.0.1** and not incrementing with new commits to the main branch. This prevented:
- New releases from being created
- Updated packages from being deployed to NuGet.org
- Beta and alpha packages from having correct version numbers for PR builds

## Root Cause
The `GitVersion.yml` configuration file had the `next-version` field hardcoded to `1.0.1`:

```yaml
mode: Mainline
next-version: 1.0.1  # ← This was preventing version increments
```

Since GitVersion uses this as the base version, all builds were calculating version `1.0.1` regardless of new commits to the repository. The existing tag `v1.0.1` pointed to an older commit, but GitVersion couldn't increment past this base version.

## Solution Applied
Updated `GitVersion.yml` to increment the version:

```yaml
mode: Mainline
next-version: 1.0.2  # ← Updated to allow version progression
```

## Impact of Fix
After this PR is merged to main:
- ✅ Next release will be tagged as **v1.0.2**
- ✅ Clean packages will be published to NuGet.org as `DevelApp.StepLexer.1.0.2.nupkg` and `DevelApp.StepParser.1.0.2.nupkg`
- ✅ Packages will be published to GitHub Packages
- ✅ Beta versions for PRs targeting main will be `1.0.2-beta.{pr-number}`
- ✅ Alpha versions for PRs targeting other branches will be `1.0.2-alpha.{pr-number}`

## How to Increment Versions in the Future
Whenever you want to release a new version, update the `next-version` in `GitVersion.yml`:

### For Minor Version Increments (1.0.x → 1.1.0)
```yaml
mode: Mainline
next-version: 1.1.0
```

### For Patch Version Increments (1.0.2 → 1.0.3)
```yaml
mode: Mainline
next-version: 1.0.3
```

### For Major Version Increments (1.x.x → 2.0.0)
```yaml
mode: Mainline
next-version: 2.0.0
```

Then commit and merge to main. The CD pipeline will automatically:
1. Build packages with the new version
2. Publish to NuGet.org and GitHub Packages
3. Create a GitHub release with the new tag

## Verification
You can verify the current version that will be generated by running:

```bash
# Install GitVersion tool
dotnet tool install --global GitVersion.Tool --version 5.*

# Check the version that will be generated
dotnet-gitversion /showvariable SemVer
```

## Related Files
- `GitVersion.yml` - Version configuration (updated to 1.0.2)
- `PACKAGE-BUILDING.md` - Documentation updated with version increment instructions
- `.github/workflows/cd.yml` - CD pipeline that creates releases
- `.github/workflows/ci.yml` - CI pipeline that publishes to GitHub Packages

## CI/CD Pipeline Status
Both pipelines are working correctly:
- **CI Pipeline**: Successfully builds and publishes pre-release packages to GitHub Packages
- **CD Pipeline**: Successfully creates releases and publishes to NuGet.org

The only issue was the version being stuck at 1.0.1 due to the GitVersion configuration.
